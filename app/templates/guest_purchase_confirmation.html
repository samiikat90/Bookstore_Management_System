<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Purchase Confirmation</title>
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
 <style>
 .confirmation-container {
 max-width: 800px;
 margin: 0 auto;
 padding: 40px 20px;
 }
 .success-icon {
 color: #28a745;
 font-size: 4rem;
 margin-bottom: 20px;
 }
 .order-details {
 background-color: #f8f9fa;
 border-radius: 8px;
 padding: 20px;
 margin: 20px 0;
 }
 .book-item {
 border-bottom: 1px solid #dee2e6;
 padding: 15px 0;
 }
 .book-item:last-child {
 border-bottom: none;
 }
 .customer-info {
 background-color: #e9ecef;
 border-radius: 8px;
 padding: 20px;
 margin: 20px 0;
 }
 </style>
</head>
<body>
 <div class="container confirmation-container">
 <div class="text-center">
 <i class="fas fa-check-circle success-icon"></i>
 <h1 class="text-success">Purchase Confirmed!</h1>
 <p class="lead">Thank you for your order. Your purchase has been successfully processed.</p>
 </div>

 <div class="card mt-4">
 <div class="card-header bg-success text-white">
 <h4><i class="fas fa-receipt"></i> Order #{{ purchase.id }}</h4>
 </div>
 <div class="card-body">
 <div class="order-details">
 <h5>Order Summary</h5>
 {% for book_purchase in all_purchases if book_purchase.book_isbn %}
 {% set book = book_purchase.get_book() %}
 <div class="book-item">
 <div class="row align-items-center">
 <div class="col-md-8">
 {% if book %}
 <h6 class="mb-1">{{ book.title }}</h6>
 <p class="text-muted mb-1">by {{ book.author }}</p>
 <p class="mb-1">
 <span class="badge badge-primary">{{ book.genre or 'No Genre' }}</span>
 <small class="text-muted">ISBN: {{ book.isbn }}</small>
 </p>
 {% else %}
 <h6 class="mb-1">Book ISBN: {{ book_purchase.book_isbn }}</h6>
 <p class="text-muted mb-1">(Book details not available)</p>
 {% endif %}
 </div>
 <div class="col-md-4 text-end">
 <div>
 <strong>Qty: {{ book_purchase.quantity }}</strong>
 </div>
 {% if book %}
 <div class="text-muted">
 ${{ "%.2f"|format(book.price) }} each
 </div>
 {% endif %}
 </div>
 </div>
 </div>
 {% endfor %}
 
 <div class="border-top pt-3 mt-3">
 <div class="row">
 <div class="col-md-6">
 <strong>Order Date:</strong><br>
 {{ purchase.timestamp.strftime('%B %d, %Y at %I:%M %p') }}
 </div>
 <div class="col-md-6 text-end">
 <h4 class="text-success">
 Order Confirmed
 </h4>
 </div>
 </div>
 </div>
 </div>

 <div class="customer-info">
 <h5>Customer Information</h5>
 <div class="row">
 <div class="col-md-6">
 <strong>Name:</strong><br>
 {{ customer.first_name }} {{ customer.last_name }}<br><br>
 
 <strong>Email:</strong><br>
 {{ customer.email }}<br><br>
 
 <strong>Phone:</strong><br>
 {{ customer.phone }}
 </div>
 <div class="col-md-6">
 <strong>Shipping Address:</strong><br>
 {{ customer.address }}
 </div>
 </div>
 </div>

 <div class="alert alert-info">
 <h6><i class="fas fa-info-circle"></i> What's Next?</h6>
 <ul class="mb-0">
 <li>A confirmation email has been sent to <strong>{{ customer.email }}</strong></li>
 <li>Your order will be processed and shipped within 1-2 business days</li>
 <li>You will receive a tracking number once your order ships</li>
 <li>Keep your order number <strong>#{{ purchase.id }}</strong> for reference</li>
 </ul>
 </div>

 <div class="text-center mt-4">
 <a href="{{ url_for('browse') }}" class="btn btn-primary">
 <i class="fas fa-book"></i> Continue Shopping
 </a>
 <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
 <i class="fas fa-home"></i> Return Home
 </a>
 </div>
 </div>
 </div>

 <div class="text-center mt-4">
 <p class="text-muted">
 <i class="fas fa-question-circle"></i>
 Questions about your order? Contact us at support@bookstore.com
 </p>
 </div>
 </div>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>